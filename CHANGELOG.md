# 更新日志 (Changelog)

本文档记录项目所有重要的变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [Unreleased]

### 计划中
- 插件系统架构
- 自定义快捷键支持
- 代码片段管理器
- Markdown 实时预览
- 多光标编辑增强

---

## [0.1.0] - 2024-12-17

### 🎉 首次发布

**若爱 (IfAI) 编辑器** 首个公开版本发布！这是一款基于 Tauri 2.0 + React 19 构建的跨平台 AI 代码编辑器。

### ✨ 新增功能

#### 核心编辑器
- **Monaco Editor 集成** - VSCode 同款编辑器引擎
  - 完整的代码高亮和语法支持
  - 智能代码补全
  - 代码折叠和缩进
  - 多种主题支持
- **多标签页编辑** - 高效管理多个文件
  - 标签页拖拽排序
  - 快速切换和关闭
  - 未保存文件标记
- **文件系统管理**
  - 文件树浏览器
  - 文件夹打开和刷新
  - 文件创建、重命名、删除 (规划中)
  - Git 状态集成显示

#### AI 智能助手
- **多模型支持** - 支持主流 AI 模型
  - OpenAI GPT 系列 (GPT-4, GPT-3.5)
  - Anthropic Claude 系列 (Claude 3.5 Sonnet, Claude 3 Opus)
  - 智谱 AI (GLM-4, GLM-3-Turbo)
  - 自定义 API 端点支持
- **AI 对话界面**
  - 流式响应输出
  - Markdown 渲染
  - 代码块语法高亮
  - 对话历史管理
- **上下文增强** (核心能力)
  - RAG 检索增强生成
  - 项目代码索引
  - 语义化搜索
  - 智能上下文构建
- **Agent 工具支持** (核心能力)
  - 文件读写工具
  - 目录列表工具
  - 工具调用审批机制
  - 部分 JSON 解析支持

#### 开发工具
- **集成终端** - 功能完整的终端模拟器
  - PTY (伪终端) 支持
  - 多终端会话管理
  - 终端大小自适应
  - ANSI 转义序列支持
- **Git 集成**
  - 文件状态追踪 (新增、修改、删除)
  - 可视化状态显示
  - Git 仓库检测
- **LSP 客户端** - 语言服务器协议支持
  - 代码智能提示
  - 定义跳转
  - 错误诊断
  - 代码格式化
- **全局搜索**
  - 文件名搜索 (模糊匹配)
  - 文件内容搜索 (正则表达式)
  - 搜索结果预览

#### 用户体验
- **多语言界面** - 中英文切换
  - i18next 国际化框架
  - 浏览器语言自动检测
  - 设置中手动切换
- **主题系统**
  - 深色主题 (默认)
  - 浅色主题 (规划中)
  - TailwindCSS 样式系统
- **响应式布局**
  - 可调整分栏尺寸
  - 侧边栏折叠
  - 自适应不同屏幕尺寸

### 🏗 技术架构

#### 前端技术栈
- **React 19** - 最新 UI 框架
- **TypeScript 5.8** - 类型安全
- **Zustand** - 轻量状态管理
- **TailwindCSS 3.4** - 实用优先 CSS 框架
- **Vite 7** - 快速构建工具
- **Monaco Editor** - 代码编辑器核心

#### 后端技术栈
- **Tauri 2.0** - 跨平台应用框架
- **Rust** - 系统级编程语言
- **tokio** - 异步运行时
- **reqwest** - HTTP 客户端 (AI API 调用)
- **git2** - Git 库集成
- **portable-pty** - 跨平台终端
- **serde** - 序列化框架

#### 核心架构特性
- **双协议架构** - 开源框架 + 私有核心
  - 开源部分: MIT 协议
  - 核心 AI: 商业协议
- **依赖注入** - 核心包与主应用解耦
- **事件驱动** - 前后端异步通信
- **插件化设计** - 易于扩展的架构

### 🧪 测试覆盖

- **Spec 测试套件** - 4 个核心测试用例
  - `spec_agent_flow.cjs` - Agent 工作流测试
  - `spec_escape_fix.cjs` - 转义序列处理测试
  - `spec_openfile_update.cjs` - 文件刷新逻辑测试
  - `spec_tool_history.cjs` - 工具历史构建测试

### 📦 构建产物

- **跨平台支持**
  - Windows (x64, ARM64)
  - macOS (Intel, Apple Silicon)
  - Linux (x64, ARM64)
- **包体积优化**
  - 前端构建: ~1.4 MB (gzip 压缩)
  - 应用包大小: 5-10 MB (取决于平台)
- **性能指标**
  - 启动时间: < 2 秒
  - 内存占用: ~100 MB (基础)
  - 编辑器响应: < 16ms (60 FPS)

### 🐛 已知问题

- 文件树不支持拖拽操作
- 未实现文件创建/删除功能
- Git 功能仅支持状态显示,不支持提交操作
- LSP 客户端功能仍在完善中
- 部分语言的语法高亮不完整

### 📝 文档

- 完整的中文 README.md
- MIT 开源协议声明
- 贡献指南 (CONTRIBUTING.md)
- 技术架构文档
- 快速开始指南

### 🙏 致谢

感谢以下开源项目的支持:
- Tauri - 跨平台框架
- Monaco Editor - 代码编辑器
- React - UI 框架
- Rust 社区 - 强大的生态系统

---

## 版本说明

### 版本号规则
- **主版本号 (Major)**: 重大架构变更或不兼容的 API 修改
- **次版本号 (Minor)**: 新增功能,保持向后兼容
- **修订号 (Patch)**: Bug 修复和小改进

### 变更类型标记
- `新增` / `Added` - 新功能
- `变更` / `Changed` - 现有功能的变更
- `弃用` / `Deprecated` - 即将移除的功能
- `移除` / `Removed` - 已移除的功能
- `修复` / `Fixed` - Bug 修复
- `安全` / `Security` - 安全性改进

---

## 链接

- [项目主页](https://github.com/peterfei/ifai)
- [问题反馈](https://github.com/peterfei/ifai/issues)
- [版本发布](https://github.com/peterfei/ifai/releases)

---

**注**: 版本 0.1.0 之前的开发历史未记录在本变更日志中。
