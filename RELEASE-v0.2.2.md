# IfAI Editor v0.2.2 发布说明

发布日期：2025-12-26

## 📋 版本概述

**v0.2.2** 带来了期待已久的**多会话并行处理**与**本地数据持久化**能力。这意味着您可以同时开启多个 AI 编程任务，并且所有的对话历史都会被安全地保存在本地数据库中，重启后即可无缝接续工作。此外，我们大幅增强了 Agent 的目录扫描性能与可视化反馈。

## 🚀 核心特性

### 1. 多会话并行管理 (Multi-Thread System)
不再局限于单一的对话窗口，现在您可以像浏览网页一样管理您的 AI 任务：
- **标签页切换**：顶部新增会话标签页，支持一键创建新会话、切换现有会话。
- **并行执行**：每个会话拥有独立的上下文环境，互不干扰，支持多个 Agent 同时在后台运行。
- **会话搜索与标签**：支持为会话添加自定义标签，并通过关键词快速检索历史会话。

### 2. 强力数据持久化 (IndexedDB Persistence)
我们引入了基于 IndexedDB 的本地存储方案，确保您的数据安全且私密：
- **自动保存**：所有的对话记录、Agent 执行状态、工具调用结果都会实时保存。
- **历史回溯**：重启应用后，所有历史会话瞬间恢复，上下文完整保留。
- **数据管理**：在设置面板中新增"数据管理"选项，支持导出、导入及清理历史数据。

### 3. 探索 Agent 视觉升级 (Explore Agent UI)
针对代码库探索场景，我们重构了可视化反馈组件：
- **实时扫描进度**：通过全新的 `ExploreProgress` 组件，实时展示 Agent 正在扫描的目录和文件分析进度。
- **智能发现报告**：扫描完成后，`ExploreFindings` 组件会结构化地展示 Agent 发现的关键代码逻辑和架构洞察。

### 4. 极致性能优化
- **高速目录扫描**：后端改用 Rust `walkdir` crate 重写了文件扫描逻辑，大项目（如 node_modules 目录）的遍历速度提升 **500%+**。
- **UI 渲染优化**：优化了消息列表的渲染逻辑，在大量消息场景下滚动更加丝滑。

## 🛠 技术细节与修复

### ✨ 新增
- `ThreadTabs`: 多会话标签页组件
- `ThreadSearchBar`: 会话搜索栏
- `DataManagementPanel`: 数据管理面板
- `threadStore`: 基于 Zustand 的会话状态管理
- `indexedDB`: 封装通用的本地数据库操作接口

### 🐛 修复
- 修复了新建会话时，旧会话的消息列表未能及时清空的显示 Bug (9bab05e)
- 修复了任务监视器中流式文件扫描状态不更新的问题 (58f134b)

## 📊 变更统计

本次发布包含 **29** 个文件变更，新增代码 **5856** 行。

---

## 🔗 相关链接

- [GitHub 项目主页](https://github.com/peterfei/ifai)
- [多线程使用指南](./docs/THREADS_GUIDE.md)
- [问题反馈](https://github.com/peterfei/ifai/issues)
